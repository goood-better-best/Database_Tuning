### 엑세스 조건과 필터 조건

- **인덱스 액세스 조건** : 인덱스 스캔 범위를 결정하는 조건절.
- **인덱스 필터 조건** : 테이블로 액세스할지를 결정하는 조건절.
- **테이블 필터 조건** : 쿼리 수행 다음 단계로 전달하거나 최종 결과집합에 포함할지를 결정함.

<br>

### 비교 연산자 종류와 컬럼 순서에 따른 군집성

- 선행 컬럼이 모두 ‘=’ 조건인 상태에서 첫 번째 나타나는 범위검색 조건까지만 만족하는 인덱스 레코드는 모두 연속해서 모여 있지만, 그 이하 조건까지 만족하는 레코드는 비교 연산자 종류에 상관없이 흩어짐.
- 아래 몇 가지 케이스를 제외하면, 인덱스 컬럼에 대한 조건절은 모두 액세스 조건에 표시됨.
    - 좌변 컬럼을 가공한 조건절
    - 왼쪽 ‘%’ 또는 양쪽 ‘%’ 기호를 사용한 like 조건절
    - 같은 컬럼에 대한 조건절이 두 개 이상일 때, 인덱스 액세스 조건으로 선택되지 못한 조건절.
    - OR Expansion 또는 INLIST ITERATOR로 선택되지 못한 OR 또는 IN 조건절.

<br>

### 인덱스 선행 컬럼이 등치(=) 조건이 아닐 때 생기는 비효율

- 인덱스 스캔 효율성은 인덱스 컬럼을 조건절에 모두 등치(=) 조건으로 사용할 떄 가장 좋음.
- 인덱스 선행 컬럼이 조건절에 없거나 부등호, BETWEEN, LIKE 같은 범위검색 조건이면, 인덱스를 스캔하는 단계에서 비효율이 생김.

<br>

### BETWEEN 조건을 IN-List로 전환할 때 주의사항

- IN-List 개수가 많지 않아야 함.
- 인덱스 스캔 과정에 선택되는 레코드들이 서로 멀리 떨어져 있을 때만 유용함.

<br>

### 범위검색 조건을 남용할 때 생기는 비효율

- 인덱스 컬럼에 범위검색 조건을 남용하면 인덱스 스캔 비효율이 생김.
- 인덱스 스캔 비효율이 성능에 미치는 영향이 적을 수도 있지만, 대량 테이블을 넓은 범위로 검색할 때는 그 영향이 매우 클 수도 있음.

<br>

### LIKE/BETWEEN 조건 활용

- 필수조건 컬럼을 인덱스 선두에 두고 액세스 조건으로 사용하면,  LIKE/BETWEEN이 인덱스 필터 조건이어도 충분히 좋은 성능을 낼 수 있음.
- LIKE/BETWEEN 패턴을 사용하고자 할 때는 아래 네 가지 경우에 속하는지 반드시 점검해야 함.
    - 인덱스 선두 컬럼
    - null 허용 컬럼
    - 숫자형 컬럼
    - 가변 길이 컬럼

<br>

### 인덱스 설계

- 가장 중요한 두 가지 선택 기준
    - 조건절에 항상 사용하거나, 자주 사용하는 컬럼을 선정함.
    - ‘=’ 조건으로 자주 조회하는 컬럼을 앞쪽에 둚.
- I/O를 최소화하면서도 소트 연산을 생략하려면 아래 공식에 따라 인덱스를 구성하면 됨.
    - ‘=’ 연산자로 사용한 조건절 컬럼 선정
    - ORDER BY 절에 기술한 컬럼 추가
    - ‘=’ 연산자가 아닌 조건절 컬럼은 데이터 분포를 고려해 추가 여부 결정
